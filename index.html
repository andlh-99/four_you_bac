<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>معلومات المستخدم - تطبيق تيليجرام المصغر</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the Inter font and general body styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5; /* Light gray background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Full viewport height */
            margin: 0;
            padding: 1rem; /* Add some padding for smaller screens */
            box-sizing: border-box; /* Include padding in element's total width and height */
        }
        /* Ensure the main container is centered and responsive */
        .container {
            max-width: 400px; /* Max width for the card */
            width: 100%; /* Full width on smaller screens */
        }
    </style>
</head>
<body>
    <div class="container bg-white p-6 rounded-lg shadow-xl text-center">
        <h1 class="text-2xl font-bold mb-6 text-gray-800">معلومات المستخدم</h1>

        <div class="mb-6">
            <img id="userPhoto" src="https://placehold.co/128x128/aabbcc/ffffff?text=صورة" alt="صورة المستخدم" class="w-32 h-32 rounded-full mx-auto mb-4 object-cover border-4 border-blue-400 shadow-md">
            <p class="text-lg font-semibold text-gray-700">مرحباً، <span id="userFirstName" class="text-blue-600"></span>!</p>
            <p class="text-sm text-gray-500">معرف المستخدم: <span id="userId"></span></p>
        </div>

        <button id="closeButton" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105">
            إغلاق التطبيق المصغر
        </button>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        // Ensure the Telegram Web App SDK is ready before accessing its properties
        window.Telegram.WebApp.ready();

        // Get references to the HTML elements
        const userFirstNameElement = document.getElementById('userFirstName');
        const userIdElement = document.getElementById('userId');
        const userPhotoElement = document.getElementById('userPhoto');
        const closeButton = document.getElementById('closeButton');

        // Check if user data is available from Telegram
        if (window.Telegram.WebApp.initDataUnsafe && window.Telegram.WebApp.initDataUnsafe.user) {
            const user = window.Telegram.WebApp.initDataUnsafe.user;

            // Display user's first name
            userFirstNameElement.textContent = user.first_name || 'غير معروف';

            // Display user's ID
            userIdElement.textContent = user.id || 'غير متوفر';

            // Display user's profile photo, or a placeholder if not available
            if (user.photo_url) {
                userPhotoElement.src = user.photo_url;
            } else {
                // Fallback placeholder image if no photo URL is provided
                userPhotoElement.src = "https://placehold.co/128x128/aabbcc/ffffff?text=لا+صورة";
            }
        } else {
            // If running outside Telegram Web App context or data is missing
            userFirstNameElement.textContent = 'مستخدم تجريبي';
            userIdElement.textContent = '123456789';
            userPhotoElement.src = "https://placehold.co/128x128/aabbcc/ffffff?text=لا+صورة";
            console.warn("Telegram Web App data not available or user info is missing. Running in standalone mode.");
        }

        // Add event listener to the close button
        closeButton.addEventListener('click', () => {
            // Close the mini app if running inside Telegram
            if (window.Telegram.WebApp.close) {
                window.Telegram.WebApp.close();
            } else {
                console.log("Not running inside Telegram Web App. Cannot close.");
                // Optionally, you can add a message box here for standalone testing
                // alert("This button only works inside Telegram Web App.");
            }
        });
    </script>
</body>
</html>

